# ============================================
# ZITADEL M2M Authentication Configuration
# ============================================
# Copy this file to .env.zitadel and update with your values
# Usage: docker-compose -f docker-compose.zitadel.yml --env-file .env.zitadel up -d

# --------------------------------------------
# Zitadel Instance Configuration
# --------------------------------------------

# Domain where Zitadel will be accessible
# Development: localhost
# Production: your-domain.com
ZITADEL_DOMAIN=localhost

# Port for Zitadel UI and API
ZITADEL_PORT=8080

# Enable HTTPS (false for local development, true for production)
ZITADEL_SECURE=false
ZITADEL_TLS=false

# Organization name (will be created on first start)
ZITADEL_ORG_NAME=CTN Association Register

# --------------------------------------------
# Initial Admin User Configuration
# --------------------------------------------
# This user will be created automatically on first start
# Access the console at: http://localhost:8080/ui/console

ZITADEL_ADMIN_USERNAME=admin
ZITADEL_ADMIN_PASSWORD=Admin123!
ZITADEL_ADMIN_EMAIL=admin@ctn-asr.local

# --------------------------------------------
# Database Configuration
# --------------------------------------------

# PostgreSQL password for Zitadel database
# IMPORTANT: Change this in production!
ZITADEL_DB_PASSWORD=zitadel_local_dev

# --------------------------------------------
# Encryption Configuration
# --------------------------------------------

# Master key for encrypting sensitive data
# IMPORTANT: Must be at least 32 characters
# CRITICAL: Keep this secret and back it up securely!
# Changing this will make existing data unreadable
ZITADEL_MASTERKEY=MustBeAtLeast32CharactersLong123456

# --------------------------------------------
# Email Configuration (Optional)
# --------------------------------------------

# SMTP configuration for sending emails
# Leave empty for development (emails will be logged instead)
SMTP_FROM=noreply@ctn-asr.local
SMTP_FROM_NAME=CTN ASR

# Uncomment and configure for production email sending:
# ZITADEL_SMTP_HOST=smtp.example.com
# ZITADEL_SMTP_PORT=587
# ZITADEL_SMTP_USER=your-smtp-user
# ZITADEL_SMTP_PASSWORD=your-smtp-password
# ZITADEL_SMTP_TLS=true

# --------------------------------------------
# Azure Functions Integration
# --------------------------------------------

# These will be configured after Zitadel setup
# See docs/ZITADEL_M2M_SETUP.md for instructions

# Zitadel issuer URL (typically https://your-domain or http://localhost:8080)
ZITADEL_ISSUER=http://localhost:8080

# Project ID from Zitadel (created during setup)
ZITADEL_PROJECT_ID=

# API application client ID (created during setup)
ZITADEL_API_CLIENT_ID=

# --------------------------------------------
# Service Account Credentials (M2M Clients)
# --------------------------------------------

# Example service account for testing
# These will be generated during setup
# Format: CLIENT_ID@PROJECT_ID
ZITADEL_SERVICE_ACCOUNT_ID=
ZITADEL_SERVICE_ACCOUNT_SECRET=

# Additional service accounts for different organizations
# Terminal operator service account
TERMINAL_OPERATOR_CLIENT_ID=
TERMINAL_OPERATOR_CLIENT_SECRET=

# Carrier service account
CARRIER_CLIENT_ID=
CARRIER_CLIENT_SECRET=

# Portal integration service account
PORTAL_INTEGRATION_CLIENT_ID=
PORTAL_INTEGRATION_CLIENT_SECRET=

# --------------------------------------------
# Token Configuration
# --------------------------------------------

# Access token lifetime in seconds (default: 1 hour)
ZITADEL_TOKEN_LIFETIME=3600

# Allowed scopes for M2M authentication
ZITADEL_ALLOWED_SCOPES=openid email profile urn:zitadel:iam:org:project:id:zitadel:aud

# --------------------------------------------
# Development Settings
# --------------------------------------------

# Enable debug logging (true for development)
ZITADEL_DEBUG=false

# Log level (debug, info, warn, error)
ZITADEL_LOG_LEVEL=info

# ============================================
# SECURITY NOTES
# ============================================
#
# 1. NEVER commit .env.zitadel to version control
# 2. Use strong passwords in production (min 16 characters, mixed case, numbers, symbols)
# 3. Rotate the ZITADEL_MASTERKEY before production deployment
# 4. Use HTTPS (ZITADEL_SECURE=true) in production
# 5. Store service account credentials in Azure Key Vault for production
# 6. Regularly rotate service account secrets
# 7. Limit service account permissions to minimum required scopes
#
# ============================================
