/**
 * Responsive Design Utilities (DA-005)
 * WCAG 2.1 AA - Responsive design for mobile devices
 *
 * Breakpoints:
 * - Mobile: 320px - 480px (small phones)
 * - Mobile Large: 481px - 767px (large phones, small tablets)
 * - Tablet: 768px - 1024px (tablets, small laptops)
 * - Desktop: 1025px+ (laptops, desktops)
 *
 * Last updated: October 29, 2025
 */

/* ==========================================================================
   Display Utilities
   ========================================================================== */

/* Hide on mobile */
@media (max-width: 767px) {
  .hide-mobile {
    display: none !important;
  }
}

/* Hide on tablet */
@media (min-width: 768px) and (max-width: 1024px) {
  .hide-tablet {
    display: none !important;
  }
}

/* Hide on desktop */
@media (min-width: 1025px) {
  .hide-desktop {
    display: none !important;
  }
}

/* Show only on mobile */
.show-mobile {
  display: none !important;
}

@media (max-width: 767px) {
  .show-mobile {
    display: block !important;
  }

  .show-mobile-inline {
    display: inline !important;
  }

  .show-mobile-flex {
    display: flex !important;
  }
}

/* ==========================================================================
   Layout Utilities
   ========================================================================== */

/* Stack on mobile */
@media (max-width: 767px) {
  .stack-mobile {
    flex-direction: column !important;
  }

  .stack-mobile > * {
    width: 100% !important;
    margin-bottom: 1rem;
  }

  .stack-mobile > *:last-child {
    margin-bottom: 0;
  }
}

/* Full width on mobile */
@media (max-width: 767px) {
  .full-width-mobile {
    width: 100% !important;
    max-width: 100% !important;
  }
}

/* ==========================================================================
   Spacing Utilities
   ========================================================================== */

/* Responsive padding */
@media (max-width: 767px) {
  .p-mobile-sm {
    padding: 0.5rem !important;
  }
  .p-mobile-md {
    padding: 1rem !important;
  }
  .p-mobile-lg {
    padding: 1.5rem !important;
  }

  .px-mobile-sm {
    padding-left: 0.5rem !important;
    padding-right: 0.5rem !important;
  }
  .px-mobile-md {
    padding-left: 1rem !important;
    padding-right: 1rem !important;
  }
  .px-mobile-lg {
    padding-left: 1.5rem !important;
    padding-right: 1.5rem !important;
  }

  .py-mobile-sm {
    padding-top: 0.5rem !important;
    padding-bottom: 0.5rem !important;
  }
  .py-mobile-md {
    padding-top: 1rem !important;
    padding-bottom: 1rem !important;
  }
  .py-mobile-lg {
    padding-top: 1.5rem !important;
    padding-bottom: 1.5rem !important;
  }
}

/* Responsive margin */
@media (max-width: 767px) {
  .m-mobile-sm {
    margin: 0.5rem !important;
  }
  .m-mobile-md {
    margin: 1rem !important;
  }
  .m-mobile-lg {
    margin: 1.5rem !important;
  }

  .mx-mobile-sm {
    margin-left: 0.5rem !important;
    margin-right: 0.5rem !important;
  }
  .mx-mobile-md {
    margin-left: 1rem !important;
    margin-right: 1rem !important;
  }
  .mx-mobile-lg {
    margin-left: 1.5rem !important;
    margin-right: 1.5rem !important;
  }

  .my-mobile-sm {
    margin-top: 0.5rem !important;
    margin-bottom: 0.5rem !important;
  }
  .my-mobile-md {
    margin-top: 1rem !important;
    margin-bottom: 1rem !important;
  }
  .my-mobile-lg {
    margin-top: 1.5rem !important;
    margin-bottom: 1.5rem !important;
  }
}

/* ==========================================================================
   Typography Utilities
   ========================================================================== */

/* Responsive text sizes */
@media (max-width: 767px) {
  .text-mobile-sm {
    font-size: 0.875rem !important;
  }
  .text-mobile-base {
    font-size: 1rem !important;
  }
  .text-mobile-lg {
    font-size: 1.125rem !important;
  }
  .text-mobile-xl {
    font-size: 1.25rem !important;
  }
}

/* Responsive text alignment */
@media (max-width: 767px) {
  .text-mobile-left {
    text-align: left !important;
  }
  .text-mobile-center {
    text-align: center !important;
  }
  .text-mobile-right {
    text-align: right !important;
  }
}

/* ==========================================================================
   Touch Target Sizing (WCAG 2.1 Level AAA - 2.5.5)
   ========================================================================== */

/* Minimum 44x44px touch targets on mobile */
@media (max-width: 767px) and (hover: none) {
  /* Buttons */
  button,
  .button,
  .btn,
  a.button {
    min-width: 44px;
    min-height: 44px;
    padding: 12px 16px;
  }

  /* Icon buttons */
  button:not(:has(span)),
  .button:not(:has(span)),
  .icon-button {
    min-width: 44px;
    min-height: 44px;
    padding: 12px;
  }

  /* Links */
  a {
    min-height: 44px;
    display: inline-flex;
    align-items: center;
    padding: 8px 4px;
  }

  /* Form inputs */
  input[type="text"],
  input[type="email"],
  input[type="tel"],
  input[type="number"],
  input[type="search"],
  select,
  textarea,
  .input,
  .textbox {
    min-height: 44px;
    padding: 12px;
    font-size: 16px; /* Prevents zoom on iOS */
  }

  /* Checkboxes and radio buttons */
  input[type="checkbox"],
  input[type="radio"] {
    min-width: 24px;
    min-height: 24px;
  }

  /* Grid action cells */
  .grid td button {
    min-width: 44px;
    min-height: 44px;
  }
}

/* ==========================================================================
   Grid & Table Responsive
   ========================================================================== */

@media (max-width: 767px) {
  /* Horizontal scroll for grids */
  .grid-container {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }

  /* Card-style grid on mobile */
  .grid-mobile-card .grid {
    display: block;
  }

  .grid-mobile-card .grid-header {
    display: none;
  }

  .grid-mobile-card .grid tbody {
    display: block;
  }

  .grid-mobile-card .grid tr {
    display: block;
    margin-bottom: 1rem;
    padding: 1rem;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  }

  .grid-mobile-card .grid td {
    display: flex;
    justify-content: space-between;
    padding: 0.5rem 0;
    border: none;
  }

  .grid-mobile-card .grid td::before {
    content: attr(data-label);
    font-weight: 600;
    margin-right: 1rem;
    flex-shrink: 0;
  }
}

/* ==========================================================================
   Form Responsive
   ========================================================================== */

@media (max-width: 767px) {
  /* Stack form rows on mobile */
  .form-row-group,
  .form-field-wrap {
    flex-direction: column !important;
    gap: 1rem !important;
  }

  .form-row-group > * {
    width: 100% !important;
  }

  /* Full width form elements */
  .form .input,
  .form .textbox,
  .form .dropdown {
    width: 100% !important;
  }

  /* Mobile-friendly field hints */
  .field-hint {
    font-size: 0.875rem;
    margin-top: 0.25rem;
  }
}

/* ==========================================================================
   Navigation Responsive
   ========================================================================== */

@media (max-width: 767px) {
  /* Collapsible sidebar */
  .admin-sidebar {
    position: fixed;
    left: -280px;
    top: 0;
    height: 100vh;
    width: 280px;
    z-index: 1000;
    transition: left 0.3s ease-in-out;
    box-shadow: 2px 0 8px rgba(0, 0, 0, 0.15);
  }

  .admin-sidebar.expanded {
    left: 0;
  }

  /* Overlay when sidebar is open */
  .sidebar-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 999;
    display: none;
  }

  .sidebar-overlay.active {
    display: block;
  }

  /* Mobile header adjustments */
  .app-header {
    padding: 0.75rem 1rem;
  }

  .header-left {
    gap: 0.5rem;
  }

  .header-right {
    gap: 0.5rem;
  }
}

/* ==========================================================================
   Dialog & Modal Responsive
   ========================================================================== */

@media (max-width: 767px) {
  /* Full-screen modals on mobile */
  .dialog {
    width: 100vw !important;
    max-width: 100vw !important;
    height: 100vh !important;
    margin: 0 !important;
    border-radius: 0 !important;
  }

  .dialog-wrapper {
    padding: 0 !important;
  }

  /* Modal content scrollable */
  .dialog-content {
    max-height: calc(100vh - 120px);
    overflow-y: auto;
  }
}

/* ==========================================================================
   Accessibility Enhancements for Mobile
   ========================================================================== */

@media (max-width: 767px) {
  /* Larger focus indicators for touch */
  *:focus {
    outline-width: 3px;
    outline-offset: 3px;
  }

  /* Prevent text zoom on orientation change */
  html {
    -webkit-text-size-adjust: 100%;
    text-size-adjust: 100%;
  }

  /* Ensure adequate spacing for tap targets */
  button + button,
  .button + .button {
    margin-left: 8px;
  }

  /* Scrollable content areas */
  .content-area {
    -webkit-overflow-scrolling: touch;
  }
}

/* ==========================================================================
   Print Styles
   ========================================================================== */

@media print {
  /* Hide interactive elements */
  .skip-to-content,
  .admin-sidebar,
  .menu-button,
  .header-right,
  button,
  .button,
  .action-buttons {
    display: none !important;
  }

  /* Print-friendly layout */
  .app-container {
    display: block !important;
  }

  .main-content {
    margin: 0 !important;
    padding: 0 !important;
  }

  /* Black text on white background */
  * {
    background: white !important;
    color: black !important;
  }

  /* Visible borders for tables */
  table,
  th,
  td {
    border: 1px solid #000 !important;
  }
}
